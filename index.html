<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fingerprint & Privacy</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.6.0/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #1c1c1c;
      color: #fff;
      font-family: 'Courier New', Courier, monospace;
      padding-top: 50px;
    }
    h1 {
      text-align: center;
      font-size: 3em;
      font-weight: bold;
    }
    .table th, .table td {
      text-align: center;
    }
    .table-responsive {
      margin-top: 30px;
    }
    .fingerprint {
      position: relative;
      width: 200px;
      height: 300px;
      border-radius: 100px / 150px;
      background: transparent;
      margin: 0 auto;
    }
    .fingerprint .loop {
      position: absolute;
      border: 2px solid rgba(0,255,0,0.2);
      border-radius: 100px / 150px;
      width: 100%;
      height: 100%;
      animation: pulse 6s infinite ease-in-out;
    }
    .fingerprint .loop:nth-child(2) {
      top: 5%;
      left: 5%;
      width: 90%;
      height: 90%;
    }
    .fingerprint .loop:nth-child(3) {
      top: 10%;
      left: 10%;
      width: 80%;
      height: 80%;
    }
    .fingerprint .loop:nth-child(4) {
      top: 15%;
      left: 15%;
      width: 70%;
      height: 70%;
    }
    .fingerprint .loop:nth-child(5) {
      top: 20%;
      left: 20%;
      width: 60%;
      height: 60%;
    }
    @keyframes pulse {
      0%, 100% { border-color: rgba(0,255,0,0.2); }
      50% { border-color: rgba(0,255,0,0.5); }
    }
    .alt-row {
      background-color: #333;
    }
    .text-break {
      word-wrap: break-word;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Privacy Fingerprint</h1>
    <div class="d-flex justify-content-center">
      <img src="qr-code-privacy.png" alt="Privacy QR Code" class="img-fluid">
    </div>
    <div id="infoContainer"></div>
    <div id="fingerprint" class="mt-5"></div>
    <div class="fingerprint-art mt-5 mb-5 d-flex justify-content-center">
      <div class="fingerprint">
        <div class="loop"></div>
        <div class="loop"></div>
        <div class="loop"></div>
        <div class="loop"></div>
        <div class="loop"></div>
      </div>
    </div>
  </div>

  <script>
    function delay(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function generateFingerprintHash(dataString) {
      const encoder = new TextEncoder();
      const data = encoder.encode(dataString);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
      return hashHex;
    }

    function getRawFingerprintData() {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      ctx.textBaseline = "top";
      ctx.font = "14px 'Arial'";
      ctx.fillStyle = "#f60";
      ctx.fillRect(125,1,62,20);
      ctx.fillStyle = "#069";
      ctx.fillText("fingerprint!", 2, 15);
      ctx.fillStyle = "rgba(102, 204, 0, 0.7)";
      ctx.fillText("fingerprint!", 4, 17);
      const canvasData = canvas.toDataURL();

      const data = [
        navigator.userAgent,
        screen.width + 'x' + screen.height,
        navigator.language,
        Intl.DateTimeFormat().resolvedOptions().timeZone,
        navigator.platform,
        navigator.hardwareConcurrency,
        navigator.deviceMemory || 'N/A',
        navigator.plugins.length,
        canvasData,
        navigator.maxTouchPoints
      ];
      return data;
    }

    function generateTable(data) {
      let table = '<div class="table-responsive"><table class="table table-bordered table-dark table-striped table-sm text-break">';
      table += '<thead><tr><th>Dato</th><th>Valore</th></tr></thead><tbody>';
      data.forEach(item => {
        table += `<tr class="alt-row"><td>${item.key}</td><td>${item.value}</td></tr>`;
      });
      table += '</tbody></table></div>';
      return table;
    }

    async function showData() {
      const container = document.getElementById('infoContainer');
      const rawData = getRawFingerprintData();
      const dataKeys = [
        "User Agent", "Risoluzione Schermo", "Lingua", "Fuso Orario",
        "Sistema", "CPU Logiche", "Memoria Dispositivo",
        "Numero Plugin", "Canvas Signature", "Supporto Touch"
      ];

      const dataObjects = rawData.map((val, i) => ({ key: dataKeys[i], value: val }));

      for (let i = 0; i < dataObjects.length; i++) {
        container.innerHTML = generateTable(dataObjects.slice(0, i + 1));
        await delay(200); // effetto scrittura graduale
      }

      const hash = await generateFingerprintHash(rawData.join('||'));
      await delay(1000);
      document.getElementById("fingerprint").innerText = "Fingerprint (SHA-256):\n" + hash;
    }

    showData();
  </script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.6.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>
